<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Transport Cards</title>
	<style type="text/css">
		div {
			margin: 10px;
			border: 2px solid grey;
		}

		#strict:before {
			content: "Strict mode:";
			font-weight: bold;
			font-size: 20px;
		}

		#nostrict:before {
			content: "No strict mode:";
			font-weight: bold;
			font-size: 20px;
		}

		p {
			border: 1px dashed blue;
		}

		span {
			background-color: green;
			border: 1px solid red;
		}
	</style>
	<script type="text/javascript" src="sorter.js"></script>
	<script type="text/javascript">
	(function () {
		window.onload = function () {
			var srcs = [
				{
					data: {
						vehicle: 'train',
						voyage: '78A',
						from: 'Madrid',
						to: 'Barcelona',
						seat: '45B',
						testvalue: 'test'
					},
					format: 'Take %vehicle %voyage from %from to %to. ?seat:Seat %seat&~No seat assignment&.'
				},
				{
					data: {
						vehicle: 'bus',
						voyage: 'airport',
						from: 'Barcelona',
						to: 'Gerona Airport',
						add: 'additional value'
					},
					format: 'Take the %voyage %vehicle from %from to %to. ?seat:Seat %seat&~No seat assignment&.'
				},
				{
					data: {
						from: 'Gerona Airport',
						vehicle: 'flight',
						voyage: 'SK455',
						to: 'Stockholm',
						gate: '45B',
						seat: '3A',
						baggage: '344'
					},
					format: 'From %from, take %vehicle %voyage to %to. ?gate:Gate %gate.&~& ?seat:Seat %seat&~No seat assignment&. ?baggage:=auto:Baggage will be automatically transferred from your last leg.&:Baggage drop at ticket counter %baggage.&~&'
				},
				{
					data: {
						from: 'Stockholm',
						vehicle: 'flight',
						voyage: 'SK22',
						to: 'New York JFK',
						gate: '22',
						seat: '7B',
						baggage: 'auto',
						add: 'additional value',
						testvalue: 'test'
					},
					format: 'From %from, take %vehicle %voyage to %to. ?gate:Gate %gate.&~& ?seat:Seat %seat&~No seat assignment&. ?baggage:=auto:Baggage will be automatically transferred from your last leg.&:Baggage drop at ticket counter %baggage.&~&'
				}
			],
			    cards = [];

			for (var i = 0, l = srcs.length; i < l; ++i) {
				var src = srcs[i];
				cards.push(new Card (src.data, src.format));
			}

			cards.sort(function (a, b) {return Math.random() - 0.5;});

			var list = sortCards.apply(this, cards);

			console.log(list.toString());
			console.log(list.toString(1));

			document.getElementById('strict').appendChild(list.toDOM());
			document.getElementById('nostrict').appendChild(list.toDOM(1));

		};
	})()
	</script>

</head>
<body>
	<div id="strict"></div>
	<div id="nostrict"></div>
</body>
</html>